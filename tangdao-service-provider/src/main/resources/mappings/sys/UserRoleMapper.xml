<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tangdao.modules.sys.mapper.UserRoleMapper">
	
	<select id="findUserRoleMapsList" resultType="java.util.Map">
		select
			ur.role_id as roleId,
			ur.user_id as userId,
			ur.created,
			ur.id,
			t.role_name as roleName,
			t.remark,
			u.username,
			u.nickname,
			u.realname
		from
			role t,
			user u,
			user_role ur
		where
			t.id = ur.role_id
			and u.id = ur.user_id
			<if test="user.id!=null">
				and u.id = #{user.id}
			</if>
			<if test="user.username!=null">
				and u.username = #{user.username}
			</if>
			<if test="user.roleId!=null">
				and ur.role_id = #{user.roleId}
			</if>
		order by ur.created
	</select>
</mapper>
